<mat-card class="card">
  <mat-card-header color="primary">
    <mat-card-title>DOCX: Word Doc Templater</mat-card-title>
  </mat-card-header>

  <mat-card-content>
    <form [formGroup]="fullForm" (ngSubmit)="createDocument()">
      <br />
      <span>Input/output file locations</span>
      <br />
      <mat-form-field>
        <mat-label>Input</mat-label>
        <input matInput formControlName="source"/>
      </mat-form-field>
      <br />
      <mat-form-field>
        <mat-label>Output</mat-label>
        <input matInput formControlName="destination"/>
      </mat-form-field>
      <br />
      <br />
      <span>Substitutions</span>
      <div formArrayName="substitutions">
        <!--<div *ngFor="let form of fullForm.controls.substitutions.value; let $index=index" >-->
        <div *ngFor="let form of fullForm.get('substitutions')['controls']; let $index=index" >
          <label>{{$index}}</label>

            <!--<div [formGroup]="fullForm.controls.substitutions.value[$index]" >-->

              <div [formGroupName]="$index" >
            <mat-form-field>
              <mat-label>Token</mat-label>
              <input matInput formControlName="token" placeholder="Ex. first_name" />
            </mat-form-field>
            <mat-form-field>
              <mat-label>Replacement</mat-label>
              <input matInput formControlName="value" placeholder="Ex. John" />
            </mat-form-field>
            </div>


        <!--<button style="background-color: brown;" (click)="logFormGroup()">log form group</button>-->

         <!-- <app-substitution [formGroupName]="$index"></app-substitution> -->

          <button style="background-color: violet;" (click)="ChangeThis(fullForm.controls.substitutions.value[$index])">change fullForm.controls.substitutions value</button>
        </div>
      </div>

      <button
        (click)="removeSubstitutionRow(1)"
        mat-mini-fab
        color="primary"
        class="modSubButton"
      >
        -
      </button>
      <button
        (click)="addSubstitutionRow()"
        mat-mini-fab
        color="primary"
        class="modSubButton"
      >
        +
      </button>

      <button
        type="submit"
        mat-raised-button
        color="primary"
        style="float: right"
      >
        Create Document
      </button>
    </form>
  </mat-card-content>
  <mat-card-actions> </mat-card-actions>
</mat-card>

<button (click)="logSubs()">log subs</button>
